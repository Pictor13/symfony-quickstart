{% extends 'AppBundle::layout.html.twig' %}

{% block title %}{{ 'admin.permissions_manage.title' | trans({'%name%': permission.name}) }}{% endblock %}

{% block body %}

    {% import 'AdminBundle:Users:macros.html.twig' as usersMacros %}
    {% import 'AdminBundle:Groups:macros.html.twig' as groupsMacros %}

    <div id="tabs">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#manage-users" data-toggle="tab">{{ 'admin.permissions_manage.granted_users'|trans }}</a></li>
            <li><a href="#manage-groups" data-toggle="tab">{{ 'admin.permissions_manage.granted_groups'|trans }}</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="manage-users">
                <h2>{{ 'admin.permissions_manage.granted_users'|trans }}</h2>
                <div class="row">
                    <div class="col-md-6">
                        {{ usersMacros.displayUsers('permissions', permission.id, permission.name, grantedUsersIn, 'in') }}
                    </div>
                    <div class="col-md-6">
                        {{ usersMacros.displayUsers('permissions', permission.id, permission.name, grantedUsersOut, 'out') }}
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="manage-groups">
                <h2>{{ 'admin.permissions_manage.granted_groups'|trans }}</h2>
                <div class="row">
                    <div class="col-md-6">
                        {{ groupsMacros.displayGroups('permissions', permission.id, permission.name, grantedGroupsIn, 'in', grant) }}
                    </div>
                    <div class="col-md-6">
                        {{ groupsMacros.displayGroups('permissions', permission.id, permission.name, grantedGroupsOut, 'out', grant) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="text-center">
        <a class="btn btn-primary" href="{{ path('admin_permissions') }}">{{ 'base.button.back' | trans }}</a>
    </div>

    <div>&nbsp;</div>

{% endblock %}

{% block script %}

    {{ include('AdminBundle::keep-tabs.html.twig') }}

{% endblock %}
